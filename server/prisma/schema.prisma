datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id         String   @id @default(uuid())
  name       String
  email      String   @unique
  lastVisit  DateTime?
  projects   Project[]
}

model Admin {
  id    String   @id @default(uuid())
  name  String
  email String   @unique
}

model Project {
  id              String                 @id @default(uuid())
  userEmail       String
  title           String
  fundingAgency   String
  projectDuration String
  status          ProjectStatus @default(HOD_PENDING)
  user   User                    @relation(fields: [userEmail], references: [email])
  forms  StaffRecruitmentForm[]
}

model StaffRecruitmentForm {
  id                 String      @id @default(uuid())
  projectId          String?
  selectionCommittee Json
  status             FormStatus  @default(PENDING)
  submittedAt        DateTime    @default(now())
  approvedAt         DateTime?
  project Project? @relation(fields: [projectId], references: [id])
}

enum FormStatus {
  PENDING
  APPROVED
  REJECTED
}

enum ProjectStatus {
  HOD_CONFIRMED
  DEAN_CONFIRMED
  HOD_PENDING
  DEAN_PENDING
  HOD_REJECTED
  DEAN_REJECTED
}