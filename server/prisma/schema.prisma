datasource db {
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id         String   @id @default(uuid())
  name       String
  email      String   @unique
  lastVisit  DateTime?
  projects   Project[]
}

model Admin {
  id    String   @id @default(uuid())
  name  String
  email String   @unique
}

model Project {
  id              String @id   @default(dbgenerated("gen_random_uuid()"))
  userEmail       String
  title           String
  fundingAgency   String
  projectDuration String
  status          ProjectStatus @default(SAVED)
  user   User                    @relation(fields: [userEmail], references: [email])
  forms  StaffRecruitmentForm[]
}

model StaffRecruitmentForm {
  id                 String      @id @default(uuid())
  projectId          String?
  selectionCommittee Json
  status             FormStatus  @default(SAVED)
  submittedAt        DateTime    @default(now())
  approvedAt         DateTime?
  project Project? @relation(fields: [projectId], references: [id])
}

enum FormStatus {
  PENDING
  SAVED
  PENDING_HOD
  REJECTED_HOD
  CONFIRMED_HOD
  PENDING_DEAN
  REJECTED_DEAN
  APPROVED
}

enum ProjectStatus {
  PENDING
  SAVED
  PENDING_HOD
  CONFIRMED_HOD
  REJECTED_HOD
  PENDING_DEAN
  REJECTED_DEAN
  APPROVED
}